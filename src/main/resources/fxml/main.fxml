<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<BorderPane xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.flightrisk.fx.controller.MainController" minWidth="1000" minHeight="700">
   <top>
      <VBox spacing="15.0" style="-fx-background-color: linear-gradient(to right, #667eea 0%, #764ba2 100%); -fx-background-radius: 10;">
         <children>
            <Label text="✈️ Flight Risk Assessment System ✈️" style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: white; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.3), 10, 0, 0, 2);" alignment="CENTER">
               <VBox.margin>
                  <Insets bottom="5.0" left="20.0" right="20.0" top="20.0" />
               </VBox.margin>
            </Label>
            <Label text="Advanced Aviation Safety Analytics Platform" style="-fx-font-size: 14px; -fx-text-fill: rgba(255,255,255,0.9);" alignment="CENTER">
               <VBox.margin>
                  <Insets bottom="15.0" left="20.0" right="20.0" />
               </VBox.margin>
            </Label>
         </children>
      </VBox>
   </top>
   <left>
      <VBox spacing="15.0" minWidth="280.0" prefWidth="320.0" maxWidth="400.0" style="-fx-background-color: #f8f9fa; -fx-background-radius: 0 10 10 0;">
         <children>
            <VBox spacing="10.0">
               <children>
                  <Label text="🛫 Airport Selection" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;">
                     <VBox.margin>
                        <Insets bottom="5.0" left="20.0" right="20.0" top="20.0" />
                     </VBox.margin>
                  </Label>
                  <ComboBox fx:id="airportComboBox" prefWidth="260.0" promptText="Choose Airport" style="-fx-background-color: white; -fx-border-color: #bdc3c7; -fx-border-radius: 5; -fx-background-radius: 5;">
                     <VBox.margin>
                        <Insets bottom="10.0" left="20.0" right="20.0" />
                     </VBox.margin>
                  </ComboBox>
               </children>
            </VBox>
            
            <VBox spacing="10.0">
               <children>
                  <Label text="⚡ Quick Actions" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;">
                     <VBox.margin>
                        <Insets bottom="5.0" left="20.0" right="20.0" top="10.0" />
                     </VBox.margin>
                  </Label>
                  <Button fx:id="predictButton" mnemonicParsing="false" onAction="#handlePredict" text="🔮 Predict Risk" style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 8; -fx-padding: 10;">
                     <VBox.margin>
                        <Insets bottom="5.0" left="20.0" right="20.0" />
                     </VBox.margin>
                  </Button>
                  <Button fx:id="refreshButton" mnemonicParsing="false" onAction="#handleRefresh" text="🔄 Refresh Data" style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 8; -fx-padding: 10;">
                     <VBox.margin>
                        <Insets bottom="5.0" left="20.0" right="20.0" />
                     </VBox.margin>
                  </Button>
                  <Button fx:id="clearHistoryButton" mnemonicParsing="false" onAction="#handleClearHistory" text="🗑️ Clear History" style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 8; -fx-padding: 10;">
                     <VBox.margin>
                        <Insets bottom="10.0" left="20.0" right="20.0" />
                     </VBox.margin>
                  </Button>
               </children>
            </VBox>
            
            <VBox spacing="10.0">
               <children>
                  <Label text="📊 Statistics" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;">
                     <VBox.margin>
                        <Insets bottom="5.0" left="20.0" right="20.0" top="10.0" />
                     </VBox.margin>
                  </Label>
                  <VBox spacing="5.0" style="-fx-background-color: white; -fx-background-radius: 8; -fx-border-color: #bdc3c7; -fx-border-radius: 8; -fx-padding: 10;">
                     <children>
                        <HBox spacing="10.0">
                           <children>
                              <Label text="Total Predictions:" style="-fx-font-weight: bold; -fx-text-fill: #7f8c8d;" />
                              <Label fx:id="totalPredictionsLabel" text="0" style="-fx-text-fill: #2c3e50; -fx-font-weight: bold;" />
                           </children>
                        </HBox>
                        <HBox spacing="10.0">
                           <children>
                              <Label text="High Risk:" style="-fx-font-weight: bold; -fx-text-fill: #e74c3c;" />
                              <Label fx:id="highRiskLabel" text="0" style="-fx-text-fill: #e74c3c; -fx-font-weight: bold;" />
                           </children>
                        </HBox>
                        <HBox spacing="10.0">
                           <children>
                              <Label text="Medium Risk:" style="-fx-font-weight: bold; -fx-text-fill: #f39c12;" />
                              <Label fx:id="mediumRiskLabel" text="0" style="-fx-text-fill: #f39c12; -fx-font-weight: bold;" />
                           </children>
                        </HBox>
                        <HBox spacing="10.0">
                           <children>
                              <Label text="Low Risk:" style="-fx-font-weight: bold; -fx-text-fill: #27ae60;" />
                              <Label fx:id="lowRiskLabel" text="0" style="-fx-text-fill: #27ae60; -fx-font-weight: bold;" />
                           </children>
                        </HBox>
                     </children>
                     <VBox.margin>
                        <Insets bottom="10.0" left="15.0" right="15.0" />
                     </VBox.margin>
                  </VBox>
               </children>
            </VBox>
         </children>
      </VBox>
   </left>
   <center>
      <SplitPane dividerPositions="0.5" style="-fx-background-color: #f5f5f5;">
         <items>
            <!-- Left Panel: Assessment and History -->
            <VBox spacing="15.0">
               <children>
                  <VBox spacing="10.0" style="-fx-background-color: white; -fx-background-radius: 10; -fx-border-color: #ecf0f1; -fx-border-radius: 10; -fx-padding: 15;">
                     <children>
                        <Label text="🎯 Current Assessment" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;">
                           <VBox.margin>
                              <Insets bottom="10.0" />
                           </VBox.margin>
                        </Label>
                        <GridPane hgap="20.0" vgap="10.0">
                           <columnConstraints>
                              <ColumnConstraints hgrow="ALWAYS" />
                              <ColumnConstraints hgrow="ALWAYS" />
                              <ColumnConstraints hgrow="ALWAYS" />
                           </columnConstraints>
                           <children>
                              <VBox spacing="5.0">
                                 <children>
                                    <Label text="Risk Level" style="-fx-font-size: 12px; -fx-text-fill: #7f8c8d;" />
                                    <Label fx:id="riskLevelLabel" text="Not assessed" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #95a5a6;" wrapText="true" />
                                 </children>
                              </VBox>
                              <VBox spacing="5.0">
                                 <children>
                                    <Label text="Weather Condition" style="-fx-font-size: 12px; -fx-text-fill: #7f8c8d;" />
                                    <Label fx:id="weatherLabel" text="Not available" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #95a5a6;" wrapText="true" />
                                 </children>
                              </VBox>
                              <VBox spacing="5.0">
                                 <children>
                                    <Label text="Risk Score" style="-fx-font-size: 12px; -fx-text-fill: #7f8c8d;" />
                                    <Label fx:id="riskScoreLabel" text="N/A" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #95a5a6;" />
                                 </children>
                              </VBox>
                           </children>
                        </GridPane>
                     </children>
                     <VBox.margin>
                        <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
                     </VBox.margin>
                  </VBox>
                  
                  <VBox spacing="10.0" VBox.vgrow="ALWAYS">
                     <children>
                        <Label text="📈 Prediction History" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;">
                           <VBox.margin>
                              <Insets bottom="10.0" />
                           </VBox.margin>
                        </Label>
                        <TableView fx:id="predictionTable" VBox.vgrow="ALWAYS" style="-fx-background-color: white; -fx-background-radius: 10; -fx-border-color: #ecf0f1; -fx-border-radius: 10;">
                           <columns>
                              <TableColumn fx:id="airportColumn" minWidth="60.0" prefWidth="80.0" text="🛫 Airport" style="-fx-background-color: #f8f9fa;" />
                              <TableColumn fx:id="riskLevelColumn" minWidth="100.0" prefWidth="120.0" text="⚠️ Risk Level" style="-fx-background-color: #f8f9fa;" />
                              <TableColumn fx:id="weatherColumn" minWidth="150.0" prefWidth="200.0" text="🌤️ Weather" style="-fx-background-color: #f8f9fa;" />
                              <TableColumn fx:id="riskScoreColumn" minWidth="80.0" prefWidth="100.0" text="📊 Score" style="-fx-background-color: #f8f9fa;" />
                              <TableColumn fx:id="predictionTimeColumn" minWidth="120.0" prefWidth="150.0" text="🕐 Time" style="-fx-background-color: #f8f9fa;" />
                              <TableColumn fx:id="actionColumn" minWidth="60.0" prefWidth="80.0" text="🔧 Actions" style="-fx-background-color: #f8f9fa;" />
                           </columns>
                        </TableView>
                     </children>
                  </VBox>
               </children>
               <VBox.margin>
                  <Insets bottom="15.0" left="15.0" right="7.5" top="15.0" />
               </VBox.margin>
            </VBox>
            
            <!-- Right Panel: Interactive Map -->
            <VBox spacing="15.0">
               <children>
                  <VBox spacing="10.0" style="-fx-background-color: white; -fx-background-radius: 10; -fx-border-color: #ecf0f1; -fx-border-radius: 10; -fx-padding: 15;">
                     <children>
                        <Label text="🗺️ Airport Map &amp; Risk Visualization" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;">
                           <VBox.margin>
                              <Insets bottom="10.0" />
                           </VBox.margin>
                        </Label>
                        <VBox spacing="10.0" VBox.vgrow="ALWAYS">
                           <children>
                              <!-- Map Container -->
                              <VBox fx:id="mapContainer" VBox.vgrow="ALWAYS" style="-fx-background-color: #e8f4fd; -fx-background-radius: 8; -fx-border-color: #b3d9ff; -fx-border-radius: 8; -fx-padding: 20;" alignment="CENTER">
                                 <children>
                                    <Label text="🗺️" style="-fx-font-size: 48px;" />
                                    <Label text="Interactive Airport Map" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" />
                                    <Label text="Click on airports to view risk data" style="-fx-font-size: 12px; -fx-text-fill: #7f8c8d;" />
                                    <Separator style="-fx-background-color: #bdc3c7;" />
                                    
                                    <!-- Airport Markers -->
                                    <GridPane hgap="10.0" vgap="10.0" alignment="CENTER">
                                       <columnConstraints>
                                          <ColumnConstraints hgrow="ALWAYS" />
                                          <ColumnConstraints hgrow="ALWAYS" />
                                          <ColumnConstraints hgrow="ALWAYS" />
                                       </columnConstraints>
                                       <children>
                                          <VBox spacing="5.0" alignment="CENTER">
                                             <children>
                                                <Button fx:id="delMarker" text="🛫 DEL" style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 15; -fx-padding: 8 12;" onAction="#onAirportMarkerClick" />
                                                <Label text="New Delhi" style="-fx-font-size: 10px; -fx-text-fill: #7f8c8d;" />
                                             </children>
                                          </VBox>
                                          <VBox spacing="5.0" alignment="CENTER">
                                             <children>
                                                <Button fx:id="bomMarker" text="🛫 BOM" style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 15; -fx-padding: 8 12;" onAction="#onAirportMarkerClick" />
                                                <Label text="Mumbai" style="-fx-font-size: 10px; -fx-text-fill: #7f8c8d;" />
                                             </children>
                                          </VBox>
                                          <VBox spacing="5.0" alignment="CENTER">
                                             <children>
                                                <Button fx:id="blrMarker" text="🛫 BLR" style="-fx-background-color: #f39c12; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 15; -fx-padding: 8 12;" onAction="#onAirportMarkerClick" />
                                                <Label text="Bangalore" style="-fx-font-size: 10px; -fx-text-fill: #7f8c8d;" />
                                             </children>
                                          </VBox>
                                          <VBox spacing="5.0" alignment="CENTER">
                                             <children>
                                                <Button fx:id="hydMarker" text="🛫 HYD" style="-fx-background-color: #f39c12; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 15; -fx-padding: 8 12;" onAction="#onAirportMarkerClick" />
                                                <Label text="Hyderabad" style="-fx-font-size: 10px; -fx-text-fill: #7f8c8d;" />
                                             </children>
                                          </VBox>
                                          <VBox spacing="5.0" alignment="CENTER">
                                             <children>
                                                <Button fx:id="ccuMarker" text="🛫 CCU" style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 15; -fx-padding: 8 12;" onAction="#onAirportMarkerClick" />
                                                <Label text="Kolkata" style="-fx-font-size: 10px; -fx-text-fill: #7f8c8d;" />
                                             </children>
                                          </VBox>
                                          <VBox spacing="5.0" alignment="CENTER">
                                             <children>
                                                <Button fx:id="jfkMarker" text="🛫 JFK" style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 15; -fx-padding: 8 12;" onAction="#onAirportMarkerClick" />
                                                <Label text="New York" style="-fx-font-size: 10px; -fx-text-fill: #7f8c8d;" />
                                             </children>
                                          </VBox>
                                       </children>
                                    </GridPane>
                                 </children>
                              </VBox>
                              
                              <!-- Map Legend -->
                              <VBox spacing="8.0" style="-fx-background-color: #f8f9fa; -fx-background-radius: 8; -fx-padding: 10;">
                                 <children>
                                    <Label text="📍 Risk Level Legend" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" />
                                    <HBox spacing="15.0">
                                       <children>
                                          <HBox spacing="5.0" alignment="CENTER_LEFT">
                                             <children>
                                                <Label text="🔴" />
                                                <Label text="High Risk" style="-fx-font-size: 12px; -fx-text-fill: #e74c3c; -fx-font-weight: bold;" />
                                             </children>
                                          </HBox>
                                          <HBox spacing="5.0" alignment="CENTER_LEFT">
                                             <children>
                                                <Label text="🟠" />
                                                <Label text="Medium Risk" style="-fx-font-size: 12px; -fx-text-fill: #f39c12; -fx-font-weight: bold;" />
                                             </children>
                                          </HBox>
                                          <HBox spacing="5.0" alignment="CENTER_LEFT">
                                             <children>
                                                <Label text="🟢" />
                                                <Label text="Low Risk" style="-fx-font-size: 12px; -fx-text-fill: #27ae60; -fx-font-weight: bold;" />
                                             </children>
                                          </HBox>
                                          <HBox spacing="5.0" alignment="CENTER_LEFT">
                                             <children>
                                                <Label text="🔵" />
                                                <Label text="No Data" style="-fx-font-size: 12px; -fx-text-fill: #3498db; -fx-font-weight: bold;" />
                                             </children>
                                          </HBox>
                                       </children>
                                    </HBox>
                                 </children>
                              </VBox>
                           </children>
                        </VBox>
                     </children>
                     <VBox.margin>
                        <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
                     </VBox.margin>
                  </VBox>
               </children>
               <VBox.margin>
                  <Insets bottom="15.0" left="7.5" right="15.0" top="15.0" />
               </VBox.margin>
            </VBox>
         </items>
      </SplitPane>
   </center>
   <bottom>
      <HBox alignment="CENTER" spacing="20.0" style="-fx-background-color: #34495e; -fx-background-radius: 0 0 10 10;">
         <children>
            <Label text="🚀 Flight Risk Assessment System v2.0" style="-fx-text-fill: white; -fx-font-weight: bold;" />
            <Label fx:id="statusLabel" text="🟢 System Ready" style="-fx-text-fill: #2ecc71; -fx-font-weight: bold;" />
            <Label fx:id="timeLabel" text="Loading..." style="-fx-text-fill: #bdc3c7;" />
         </children>
         <VBox.margin>
            <Insets bottom="10.0" left="20.0" right="20.0" top="10.0" />
         </VBox.margin>
      </HBox>
   </bottom>
</BorderPane>


